!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=r(e);if(t){var c=r(this).constructor;a=Reflect.construct(n,arguments,c)}else a=n.apply(this,arguments);return s(this,a)}}function s(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function r(e){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"66Z7":function(t,s,r){"use strict";r.r(s),r.d(s,"SystemMapModule",function(){return K});var o,i=r("ofXK"),u=r("t0Ln"),b=r("tyNb"),p=r("N5T1"),f=r("UR3C"),l=r("quSY"),m=r("NdHK"),g=r("fXoL"),h=r("hn8X"),d=r("cI3Y"),v=r("Womt"),y=r("HpzX"),S=r("4GCU"),w=r("3Y7Z"),M=((o=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(r,t);var s=c(r);function r(t,a,n){var c;return e(this,r),(c=s.call(this,t)).gamepadService=a,c.keyMouseService=n,c.keyMouseService.attach(t.nativeElement),c.keyMouseService.state.subscribe(function(e){c.applyMouseStateToMapCamera(e)}),c.gamepadService.controller1.subscribe(function(e){}),c}return a(r,[{key:"starSystem",get:function(){return this.$starSystem},set:function(e){this.$starSystem=e}},{key:"getViewport",value:function(e,t){return this.viewport&&this.viewport.camera===e&&this.viewport.screen===t||(this.viewport=new S.c(e,t)),this.viewport.starSystem=this.starSystem,this.viewport}},{key:"applyMouseStateToMapCamera",value:function(e){var t=new v.y;this.viewport.camera.getWorldDirection(t),t.z=0;var a=t.clone().applyAxisAngle(new v.y(0,0,1),.5*Math.PI);if(e.leftMouse===y.b.Hold&&e.rightMouse===y.b.Hold)return this.viewport.cursor.cursorPosition.addScaledVector(t,.25*e.deltaY),this.viewport.cursor.cursorPosition.addScaledVector(a,.25*e.deltaX),!0;if(e.leftMouse===y.b.Hold)this.viewport.cursor.cameraRotation+=e.deltaX/100,this.viewport.cursor.cameraAngle+=e.deltaY/100,this.viewport.cursor.cameraAngle>Math.PI&&(this.viewport.cursor.cameraAngle=Math.PI),this.viewport.cursor.cameraAngle<-Math.PI&&(this.viewport.cursor.cameraAngle=-Math.PI);else if(e.rightMouse===y.b.Hold)return this.viewport.cursor.cursorPosition.z+=.25*e.deltaY,!0;e.deltaZ<0?(this.viewport.cursor.cameraZoom-=10,this.viewport.cursor.cameraZoom<5&&(this.viewport.cursor.cameraZoom=5)):e.deltaZ>0&&(this.viewport.cursor.cameraZoom+=10)}}]),r}(w.a)).\u0275fac=function(e){return new(e||o)(g.Lb(g.l),g.Lb(m.b),g.Lb(y.a))},o.\u0275cmp=g.Fb({type:o,selectors:[["space-viewport-system"]],inputs:{starSystem:"starSystem"},features:[g.xb],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}"]}),o),P=r("iBBg"),C=r("qAme"),A=r("HZIp"),k=r("ZfcE"),x=r("e6+D"),R=r("rVAJ"),Q=r("Lh2f");function O(e,t){1&e&&(g.Rb(0,"span"),g.sc(1,"Navigate"),g.Qb())}function I(e,t){1&e&&(g.Rb(0,"span"),g.sc(1,"Flightplan"),g.Qb())}function z(e,t){1&e&&(g.Rb(0,"span"),g.sc(1,"Inter astra"),g.Qb())}function Y(e,t){1&e&&(g.Rb(0,"span"),g.sc(1,"Explore"),g.Qb())}function _(e,t){1&e&&(g.Rb(0,"span"),g.sc(1,"Trade"),g.Qb())}function q(e,t){1&e&&(g.Rb(0,"span"),g.sc(1,"Powerplay"),g.Qb())}function T(e,t){if(1&e){var a=g.Sb();g.Rb(0,"asc-frame-menu",15),g.Yb("activePageChange",function(e){return g.mc(a),g.bc().tab=e})("activePageChange",function(e){return g.mc(a),g.bc().onTabChange(e)}),g.Mb(1,"asc-frame-page",16),g.Mb(2,"asc-frame-page",17),g.Mb(3,"asc-frame-page",18),g.Mb(4,"asc-frame-page",19),g.Mb(5,"asc-frame-page",20),g.Qb()}if(2&e){var n=g.bc();g.ec("activePage",n.tab),g.Ab(2),g.ec("seperator",!0),g.Ab(1),g.ec("seperator",!0)}}function j(e,t){if(1&e){var a=g.Sb();g.Rb(0,"asc-frame-menu",21),g.Yb("activePageChange",function(e){return g.mc(a),g.bc().tab=e})("activePageChange",function(e){return g.mc(a),g.bc().onTabChange(e)}),g.Mb(1,"asc-frame-page",16),g.Mb(2,"asc-frame-page",17),g.Mb(3,"asc-frame-page",22),g.Mb(4,"asc-frame-page",23),g.Qb()}if(2&e){var n=g.bc();g.ec("activePage",n.tab),g.Ab(2),g.ec("seperator",!0),g.Ab(1),g.ec("seperator",!0)}}function Z(e,t){if(1&e){var a=g.Sb();g.Rb(0,"asc-frame-menu",21),g.Yb("activePageChange",function(e){return g.mc(a),g.bc().tab=e})("activePageChange",function(e){return g.mc(a),g.bc().onTabChange(e)}),g.Mb(1,"asc-frame-page",16),g.Mb(2,"asc-frame-page",17),g.Mb(3,"asc-frame-page",24),g.Mb(4,"asc-frame-page",25),g.Mb(5,"asc-frame-page",26),g.Qb()}if(2&e){var n=g.bc();g.ec("activePage",n.tab),g.Ab(2),g.ec("seperator",!0)}}function E(e,t){if(1&e){var a=g.Sb();g.Rb(0,"asc-frame-menu",21),g.Yb("activePageChange",function(e){return g.mc(a),g.bc().tab=e})("activePageChange",function(e){return g.mc(a),g.bc().onTabChange(e)}),g.Mb(1,"asc-frame-page",16),g.Mb(2,"asc-frame-page",17),g.Mb(3,"asc-frame-page",27),g.Rb(4,"asc-frame-page",28),g.Rb(5,"asc-frame-column"),g.sc(6," Show market comparison information. "),g.Qb(),g.Qb(),g.Qb()}if(2&e){var n=g.bc();g.ec("activePage",n.tab),g.Ab(2),g.ec("seperator",!0)}}function L(e,t){if(1&e){var a=g.Sb();g.Rb(0,"asc-frame-menu",21),g.Yb("activePageChange",function(e){return g.mc(a),g.bc().tab=e})("activePageChange",function(e){return g.mc(a),g.bc().onTabChange(e)}),g.Mb(1,"asc-frame-page",16),g.Mb(2,"asc-frame-page",17),g.Qb()}if(2&e){var n=g.bc();g.ec("activePage",n.tab),g.Ab(2),g.ec("seperator",!0)}}var B,H,X,F=function(){return[2,2,90,2]},J=[{path:"",component:(B=function(){function t(a,n,c){var s=this;e(this,t),this.spaceService=a,this.locationService=n,this.gamepadService=c,this.subscription=new l.a,this.mode="navigate",this.tab="current",this.starSystem=new p.a,this.starMode=f.b,this.settings=f.a,this.subscription.add(this.spaceService.getStarSystem("okinura").subscribe(function(e){s.starSystem=e})),this.subscription.add(this.gamepadService.controller1.subscribe(function(e){e.leftBumper===m.a.Click&&s.previousPage(),e.rightBumper===m.a.Click&&s.nextPage()}))}return a(t,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"onModeSelect",value:function(e){switch(this.mode=e,this.mode){case"navigate":this.settings.starMode=f.b.Security;break;case"flightplan":this.settings.starMode=f.b.StarClass;break;case"explore":this.settings.starMode=f.b.VisitedStars;break;case"trade":this.settings.starMode=f.b.Economy;break;case"powerplay":this.settings.starMode=f.b.Allegiance}}},{key:"onTabChange",value:function(e){"current"===e&&(f.a.focusSystem=f.a.currentSystem),"selected"===e&&(f.a.focusSystem=f.a.selectedSystem)}},{key:"onBack",value:function(){history.back()}},{key:"onExit",value:function(){history.back()}},{key:"previousPage",value:function(){switch(this.mode){case"powerplay":this.onModeSelect("trade");break;case"trade":this.onModeSelect("explore");break;case"explore":this.onModeSelect("flightplan");break;case"flightplan":this.onModeSelect("navigate")}}},{key:"nextPage",value:function(){switch(this.mode){case"navigate":this.onModeSelect("flightplan");break;case"flightplan":this.onModeSelect("explore");break;case"explore":this.onModeSelect("trade");break;case"trade":this.onModeSelect("powerplay")}}}]),t}(),B.\u0275fac=function(e){return new(e||B)(g.Lb(h.a),g.Lb(d.a),g.Lb(m.b))},B.\u0275cmp=g.Fb({type:B,selectors:[["ng-component"]],decls:35,vars:24,consts:[[3,"starSystem"],[3,"rect"],[3,"open"],[1,"mode",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"choice"],[3,"selected","press"],["icon","/assets/icons/location"],["icon","/assets/icons/route"],[1,"spacer"],["icon","/assets/icons/codex"],["icon","/assets/icons/commodity"],["icon","/assets/icons/gal-power"],["margin","1","position","10","menuSize","3","pageSize","25",3,"activePage","activePageChange",4,"ngIf"],["margin","1","position","10","menuSize","4","pageSize","25",3,"activePage","activePageChange",4,"ngIf"],["margin","1","position","10","menuSize","3","pageSize","25",3,"activePage","activePageChange"],["id","selected","icon","/assets/icons/location-select"],["id","legend","icon","/assets/icons/galaxy-map/options",3,"seperator"],["id","search","icon","/assets/icons/search",3,"seperator"],["id","your-missions","icon","/assets/icons/mission"],["icon","/assets/icons/bookmark"],["margin","1","position","10","menuSize","4","pageSize","25",3,"activePage","activePageChange"],["id","management","icon","/assets/icons/galaxy-map/flightplan",3,"seperator"],["id","add","icon","/assets/icons/add"],["id","triangulate","icon","/assets/icons/triangulate"],["id","rangefinder","icon","/assets/icons/rangefinder"],["id","ruler","icon","/assets/icons/ruler"],["id","routes","icon","/assets/icons/compare"],["id","extraction","icon","/assets/icons/compare"]],template:function(e,t){1&e&&(g.Mb(0,"space-viewport-system",0),g.Rb(1,"asc-frame",1),g.Rb(2,"asc-frame-column",2),g.Rb(3,"div",3),g.sc(4," Stellar atlas | system map "),g.qc(5,O,2,0,"span",4),g.qc(6,I,2,0,"span",4),g.qc(7,z,2,0,"span",4),g.qc(8,Y,2,0,"span",4),g.qc(9,_,2,0,"span",4),g.qc(10,q,2,0,"span",4),g.Qb(),g.Qb(),g.Rb(11,"asc-frame-column",2),g.Rb(12,"asc-tile-row",5),g.Rb(13,"asc-tile",6),g.Yb("press",function(){return t.onModeSelect("navigate")}),g.Mb(14,"asc-icon",7),g.sc(15,"Navigate"),g.Qb(),g.Rb(16,"asc-tile",6),g.Yb("press",function(){return t.onModeSelect("flightplan")}),g.Mb(17,"asc-icon",8),g.sc(18,"Flightplan"),g.Qb(),g.Mb(19,"div",9),g.Rb(20,"asc-tile",6),g.Yb("press",function(){return t.onModeSelect("explore")}),g.Mb(21,"asc-icon",10),g.sc(22,"Explore"),g.Qb(),g.Rb(23,"asc-tile",6),g.Yb("press",function(){return t.onModeSelect("trade")}),g.Mb(24,"asc-icon",11),g.sc(25,"Trade"),g.Qb(),g.Rb(26,"asc-tile",6),g.Yb("press",function(){return t.onModeSelect("powerplay")}),g.Mb(27,"asc-icon",12),g.sc(28,"Powerplay"),g.Qb(),g.Qb(),g.Qb(),g.Mb(29,"asc-frame-column",2),g.Qb(),g.qc(30,T,6,3,"asc-frame-menu",13),g.qc(31,j,5,3,"asc-frame-menu",14),g.qc(32,Z,6,2,"asc-frame-menu",14),g.qc(33,E,7,2,"asc-frame-menu",14),g.qc(34,L,3,2,"asc-frame-menu",14)),2&e&&(g.ec("starSystem",t.starSystem),g.Ab(1),g.ec("rect",g.fc(23,F)),g.Ab(1),g.ec("open",!0),g.Ab(1),g.ec("ngSwitch",t.mode),g.Ab(2),g.ec("ngSwitchCase","navigate"),g.Ab(1),g.ec("ngSwitchCase","flightplan"),g.Ab(1),g.ec("ngSwitchCase","interastra"),g.Ab(1),g.ec("ngSwitchCase","explore"),g.Ab(1),g.ec("ngSwitchCase","trade"),g.Ab(1),g.ec("ngSwitchCase","powerplay"),g.Ab(1),g.ec("open",!0),g.Ab(1),g.ec("choice",!0),g.Ab(1),g.ec("selected","navigate"===t.mode),g.Ab(3),g.ec("selected","flightplan"===t.mode),g.Ab(4),g.ec("selected","explore"===t.mode),g.Ab(3),g.ec("selected","trade"===t.mode),g.Ab(3),g.ec("selected","powerplay"===t.mode),g.Ab(3),g.ec("open",!0),g.Ab(1),g.ec("ngIf","navigate"===t.mode),g.Ab(1),g.ec("ngIf","flightplan"===t.mode),g.Ab(1),g.ec("ngIf","explore"===t.mode),g.Ab(1),g.ec("ngIf","trade"===t.mode),g.Ab(1),g.ec("ngIf","powerplay"===t.mode))},directives:[M,P.a,C.a,i.k,i.l,A.a,k.a,x.a,i.j,R.a,Q.a],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;background:#000;z-index:1000}asc-frame-page[_ngcontent-%COMP%]{--asc-item-square:4vh}asc-tile-row[_ngcontent-%COMP%]{--asc-font-size:1.2vh}.mode[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;align-items:flex-start;justify-content:center;text-shadow:2px 2px rgba(0,0,0,.8);font-size:1.6vh;color:var(--asc-primary-color)}.mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3.5vh;line-height:3vh;color:#fff}"]}),B)}],N=((H=function t(){e(this,t)}).\u0275fac=function(e){return new(e||H)},H.\u0275mod=g.Jb({type:H}),H.\u0275inj=g.Ib({imports:[[b.d.forChild(J)],b.d]}),H),V=r("OF9g"),D=r("cI8z"),K=((X=function t(){e(this,t)}).\u0275fac=function(e){return new(e||X)},X.\u0275mod=g.Jb({type:X}),X.\u0275inj=g.Ib({imports:[[i.b,u.a,D.a,V.a,N]]}),X)}}])}();