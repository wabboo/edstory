(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"4A+J":function(t,s,e){"use strict";e.d(s,"a",function(){return a});var i=e("2Vo4");class o{constructor(){this.corporations=!0,this.altNavigationPanel=!1,this.passengerLines=!1,this.advisors=!1,this.mechanic=!1,this.restructuredShipPanels=!1,this.altCommodityMarket=!1,this.fleetCarriers=!0,this.odyssey=!1}}class n{}var r=e("fXoL");let a=(()=>{class t{constructor(){this.features=new i.a(new o),this.commander=new i.a(void 0);const t=new n;t.name="TestSubject",t.balance=1e7,this.commander.next(t)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},DzGr:function(t,s,e){"use strict";e.d(s,"a",function(){return r});var i=e("IVc4"),o=e("ofXK"),n=e("fXoL");let r=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=n.Jb({type:t}),t.\u0275inj=n.Ib({imports:[[o.b,i.a]]}),t})()},"FCE/":function(t,s,e){"use strict";e.d(s,"a",function(){return r});var i=e("fXoL"),o=e("ys0j"),n=e("PqYM");let r=(()=>{class t{constructor(){this.state=new i.n,this.keyMouseState=new o.a,this.tick=0}attach(t){this.domElement&&(this.domElement.removeEventListener("mousemove",t=>{this.mouseHandler(t,"move")}),this.domElement.removeEventListener("mousedown",t=>{this.mouseHandler(t,"down")}),this.domElement.removeEventListener("mouseup",t=>{this.mouseHandler(t,"up")}),this.domElement.removeEventListener("wheel",t=>{this.wheelHandler(t)})),this.domElement=t,this.domElement.addEventListener("mousemove",t=>{this.mouseHandler(t,"move")}),this.domElement.addEventListener("mousedown",t=>{this.mouseHandler(t,"down")}),this.domElement.addEventListener("mouseup",t=>{this.mouseHandler(t,"up")}),this.domElement.addEventListener("wheel",t=>{this.wheelHandler(t)}),this.processState()}mouseHandler(t,s){this.keyMouseState.applyMouse(t,s,this.tick),t.stopPropagation()}wheelHandler(t){this.keyMouseState.applyWheel(t,this.tick)}processState(){this.tick+=1,this.keyMouseState.userInput&&(this.state.emit(this.keyMouseState),this.keyMouseState.userInput=!1,this.keyMouseState.applyTick()),Object(n.a)(16.67).subscribe(()=>this.processState())}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},HP1K:function(t,s,e){"use strict";e.d(s,"a",function(){return n});var i=e("VO3d"),o=e("ZmmG");class n extends i.a{constructor(){super(...arguments),this.systems=[]}load(t){for(const s of t){const t=new o.a;t.name=s.name,t.economy=s.information?s.information.economy:"None",t.coords.set(s.coords.x,s.coords.y,s.coords.z),this.attach(t),this.systems.push(t)}}applyLod(t,s){}run(t){super.run(t);for(const s of this.systems)s.run(t)}updateContext(t,s){}}},Jrv8:function(t,s,e){"use strict";e.d(s,"a",function(){return c});var i=e("Womt"),o=e("krhP"),n=e("ys0j");class r extends i.j{constructor(){super(),this.cameraZoom=100,this.cameraAngle=1,this.cameraRotation=1,this.cursorPosition=new i.p,this.flightMode=!0,this.actualZoom=100,this.actualAngle=1,this.actualRotation=1;const t=new i.b(.2,10),s=new i.i({color:"white"});s.side=i.f;const e=new i.h(t,s);this.add(e)}updateCamera(t){this.actualZoom=this.actualZoom+(this.cameraZoom-this.actualZoom)/25,this.actualRotation=this.actualRotation+(this.cameraRotation-this.actualRotation)/10,this.actualAngle=this.actualAngle+(this.cameraAngle-this.actualAngle)/10,this.flightMode?this.position.lerp(this.cursorPosition,.05):(this.position.x=this.position.x+(this.cursorPosition.x-this.position.x)/2,this.position.y=this.position.y+(this.cursorPosition.y-this.position.y)/2,this.position.z=this.position.z+(this.cursorPosition.z-this.position.z)/2);const s=new i.p,e=new i.p(0,0,1);s.set(Math.sin(this.actualRotation),Math.cos(this.actualRotation),Math.sin(this.actualAngle)),t.position.copy(this.position),t.position.addScaledVector(s,this.actualZoom),t.position.addScaledVector(e,10),t.lookAt(this.position),t.up.copy(e)}}var a=e("fXoL");let c=(()=>{class t{constructor(t){this.element=t,this.loader=new i.e,this.renderer=new i.q,this.scene=new i.l,this.camera=new i.k(60,window.innerWidth/window.innerHeight,1e-4,1e6),this.grid=new i.g(1e3,100,new i.c("blue"),new i.c("teal")),this.cursor=new r,t.nativeElement.oncontextmenu=t=>{t.preventDefault()}}ngOnInit(){this.element.nativeElement.appendChild(this.renderer.domElement),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setAnimationLoop(()=>{this.renderFrame()}),this.scene.background=this.loader.load(["assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg"])}ngOnDestroy(){this.scene.dispose(),this.renderer.dispose()}onResize(t){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}resetViewport(t){this.grid.rotation.set(.5*Math.PI,0,0),this.grid.renderOrder=1,this.scene.children=[],this.scene.children.push(this.cursor),this.scene.children.push(this.grid),t.linkToScene(this.scene)}applyGamepadStateToMapCamera(t){const s=new i.p;this.camera.getWorldDirection(s),s.z=0;const e=s.clone().applyAxisAngle(new i.p(0,0,1),.5*Math.PI);t.buttonX===o.a.Hold?this.cursor.cursorPosition.z+=t.leftStickAxisY*(this.cursor.cameraZoom/100):(this.cursor.cursorPosition.addScaledVector(s,t.leftStickAxisY*(this.cursor.cameraZoom/100)),this.cursor.cursorPosition.addScaledVector(e,this.cursor.cameraZoom/100*-t.leftStickAxisX)),this.cursor.cameraRotation+=t.rightStickAxisX/20,this.cursor.cameraAngle-=t.rightStickAxisY/20,this.cursor.cameraAngle>.5*Math.PI&&(this.cursor.cameraAngle=.5*Math.PI),this.cursor.cameraAngle<.5*-Math.PI&&(this.cursor.cameraAngle=.5*-Math.PI),t.rightTrigger>0?(this.cursor.cameraZoom-=5,this.cursor.cameraZoom<5&&(this.cursor.cameraZoom=5)):t.leftTrigger>0&&(this.cursor.cameraZoom+=5)}applyMouseStateToMapCamera(t){const s=new i.p;this.camera.getWorldDirection(s),s.z=0;const e=s.clone().applyAxisAngle(new i.p(0,0,1),.5*Math.PI);t.leftMouse===n.b.Hold&&t.rightMouse===n.b.Hold?(this.cursor.cursorPosition.addScaledVector(s,t.deltaY),this.cursor.cursorPosition.addScaledVector(e,t.deltaX)):t.leftMouse===n.b.Hold?(this.cursor.cameraRotation+=t.deltaX/100,this.cursor.cameraAngle+=t.deltaY/100,this.cursor.cameraAngle>Math.PI&&(this.cursor.cameraAngle=Math.PI),this.cursor.cameraAngle<-Math.PI&&(this.cursor.cameraAngle=-Math.PI)):t.rightMouse===n.b.Hold&&(this.cursor.cursorPosition.z+=t.deltaY),t.deltaZ<0?(this.cursor.cameraZoom-=10,this.cursor.cameraZoom<5&&(this.cursor.cameraZoom=5)):t.deltaZ>0&&(this.cursor.cameraZoom+=10)}renderFrame(){this.tick=Date.now(),this.run(this.tick),this.cursor.updateCamera(this.camera),this.grid.position.setZ(this.cursor.position.z),this.renderer.render(this.scene,this.camera)}}return t.\u0275fac=function(s){return new(s||t)(a.Lb(a.l))},t.\u0275dir=a.Gb({type:t,hostBindings:function(t,s){1&t&&a.Yb("resize",function(t){return s.onResize(t)},!1,a.lc)}}),t})()},U6jI:function(t,s,e){"use strict";e.d(s,"a",function(){return r});var i=e("fXoL"),o=e("PqYM"),n=e("krhP");let r=(()=>{class t{constructor(){this.controller1=new i.n,this.gamepadState=new n.b,this.tick=0,window.addEventListener("gamepadconnected",t=>{this.gamepad=t.gamepad,this.processState()}),window.addEventListener("gamepaddisconnected",t=>{this.gamepad=void 0})}processState(){this.gamepad&&(this.gamepad=navigator.getGamepads()[this.gamepad.index],this.tick+=1,this.gamepadState.apply(this.gamepad,this.tick),this.gamepadState.userInput&&this.controller1.next(this.gamepadState),Object(o.a)(16.67).subscribe(()=>this.processState()))}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=i.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},UNDe:function(t,s,e){"use strict";e.d(s,"a",function(){return o});var i=e("fXoL");let o=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=i.Fb({type:t,selectors:[["ed-frame-filler"]],decls:0,vars:0,template:function(t,s){},styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto}"]}),t})()},ZmmG:function(t,s,e){"use strict";e.d(s,"a",function(){return c});var i=e("Womt"),o=e("VO3d");class n extends o.a{constructor(){super(...arguments),this.eccentricity=0,this.orbitalInclination=0,this.orbitalPeriod=1,this.$artificials=[]}get artificials(){return this.$artificials}addStation(t){this.attach(t),this.$artificials.push(t)}addInstallation(t){this.attach(t),this.$artificials.push(t)}load(t){super.load(t),this.radius=n.KmToLs(t.radius),this.orbitalPeriod=t.orbitalPeriod?t.orbitalPeriod:0,this.semiMajorAxis=n.AuToLs(t.semiMajorAxis?t.semiMajorAxis:0),this.orbitalInclination=t.orbitalInclination?t.orbitalInclination:0}run(t){super.run(t);for(const s of this.artificials)s.run(t)}applyLod(t,s){}addMarkerToContext(t,s,e=!1){if(e){const e=new i.d(1,2,10),o=new i.i({color:new i.c(s)});o.opacity=.5,o.transparent=!0;const n=new i.h(e,o);n.position.z=1+this.radius,n.rotation.x=-.5*Math.PI,t.add(n)}else{const e=new i.d(2.5,5,10),o=new i.i({color:new i.c(s)});o.opacity=.5,o.transparent=!0;const n=new i.h(e,o);n.position.z=2.5+this.radius,n.rotation.x=-.5*Math.PI,t.add(n)}}updateContext(t,s){const e=24*this.orbitalPeriod*60*60*1e3,i=2*Math.PI*(s%e/e||0),o=Math.tan(.0174532925*this.orbitalInclination)*this.semiMajorAxis;t.position.x=Math.sin(i)*this.semiMajorAxis,t.position.y=Math.cos(i)*this.semiMajorAxis*(1-this.eccentricity),t.position.z=Math.sin(i)*o}}class r extends n{constructor(){super(...arguments),this.$planets=[]}get planets(){return this.$planets}addPlanet(t){this.attach(t),this.$planets.push(t)}load(t){if(super.load(t),t.planets)for(const s of t.planets){const t=new r;t.load(s),this.addPlanet(t)}}run(t){super.run(t);for(const s of this.planets)s.run(t)}applyLod(t,s){if(super.applyLod(t,s),this.getParent()instanceof r){this.addMarkerToContext(t,"gray",!0);const s=new i.m(this.radius,25,25),e=new i.i({color:"gray"}),o=new i.h(s,e);t.add(o)}else{this.addMarkerToContext(t,"green");const s=new i.m(this.radius,25,25),e=new i.i({color:"green"}),o=new i.h(s,e);t.add(o)}}}class a extends n{constructor(){super(...arguments),this.$planets=[]}get planets(){return this.$planets}addPlanet(t){this.attach(t),this.$planets.push(t)}load(t){if(super.load(t),t.planets)for(const s of t.planets){const t=new r;t.load(s),this.addPlanet(t)}}run(t){super.run(t);for(const s of this.planets)s.run(t)}applyLod(t,s){super.applyLod(t,s),this.addMarkerToContext(t,"yellow");const e=new i.m(this.radius,25,25),o=new i.i({color:"yellow"}),n=new i.h(e,o);t.name=this.name,t.add(n)}}class c extends o.a{constructor(){super(...arguments),this.coords=new i.p,this.viewMode="economy",this.$stars=[],this.$contacts=[]}get stars(){return this.$stars}get contacts(){return this.$contacts}addStar(t){this.attach(t),this.$stars.push(t)}load(t){super.load(t),t.coords&&this.coords.copy(t.coords);for(const s of t.stars){const t=new a;t.load(s),this.addStar(t)}}run(t){super.run(t);for(const s of this.$stars)s.run(t);for(const s of this.$contacts)s.run(t)}applyLod(t,s){switch(t.name=this.name,s){case 0:{const s=new i.m(.1,10,10),e=new i.i({color:this.getSystemColor()}),o=new i.h(s,e);t.add(o),this.addTextObject(t,this.name)}break;case 1:{const s=new i.m(.1,10,10),e=new i.i({color:this.getSystemColor()}),o=new i.h(s,e);t.add(o)}break;case 2:{const s=new i.m(.1,5,5),e=new i.i({color:this.getSystemColor()}),o=new i.h(s,e);t.add(o)}}}updateContext(t,s){t.position.copy(this.coords)}getSystemColor(){let t="gray";switch(this.viewMode){case"economy":"Agriculture"===this.economy&&(t="lime"),"Industrial"===this.economy&&(t="blue"),"Extraction"===this.economy&&(t="red"),"Refinery"===this.economy&&(t="orange"),"Military"===this.economy&&(t="fuchsia")}return t}addTextObject(t,s){const e=document.createElement("canvas");e.width=256,e.height=32;const o=e.getContext("2d");o.fillStyle="#FFFFFF",o.font='bold 16px "jura", sans-serif',o.textAlign="center",o.textBaseline="top",o.fillText(s.toUpperCase(),128,16,256);const n=new i.a(e);n.needsUpdate=!0;const r=new i.o({map:n}),a=new i.n(r);a.scale.x=8,a.position.setZ(1.1),t.add(a)}}},krhP:function(t,s,e){"use strict";e.d(s,"a",function(){return i}),e.d(s,"b",function(){return o});var i=function(t){return t[t.Inactive=0]="Inactive",t[t.Click=2]="Click",t[t.Hold=3]="Hold",t}({});class o{constructor(){this.buttonTick=[],this.buttonA=i.Inactive,this.buttonB=i.Inactive,this.buttonX=i.Inactive,this.buttonY=i.Inactive,this.leftBumper=i.Inactive,this.rightBumper=i.Inactive,this.leftStick=i.Inactive,this.rightStick=i.Inactive,this.dPadUp=i.Inactive,this.dPadRight=i.Inactive,this.dPadDown=i.Inactive,this.dPadLeft=i.Inactive}get holdState(){return this.buttonA===i.Hold||this.buttonB===i.Hold||this.buttonX===i.Hold||this.buttonY===i.Hold||this.leftStick===i.Hold||this.rightStick===i.Hold||this.leftBumper===i.Hold||this.rightBumper===i.Hold||this.dPadUp===i.Hold||this.dPadRight===i.Hold||this.dPadDown===i.Hold||this.dPadLeft===i.Hold}apply(t,s){if(this.userInput=!1,this.buttonTick.length!==t.buttons.length){this.buttonTick=[];for(const s of t.buttons)this.buttonTick.push(void 0)}this.buttonA=this.processButton(0,t,s),this.buttonB=this.processButton(1,t,s),this.buttonX=this.processButton(2,t,s),this.buttonY=this.processButton(3,t,s),this.leftBumper=this.processButton(4,t,s),this.rightBumper=this.processButton(5,t,s),this.leftStick=this.processButton(10,t,s),this.rightStick=this.processButton(11,t,s),this.dPadUp=this.processButton(12,t,s),this.dPadDown=this.processButton(13,t,s),this.dPadLeft=this.processButton(14,t,s),this.dPadRight=this.processButton(15,t,s),this.leftTrigger=this.processButtonValue(6,t),this.rightTrigger=this.processButtonValue(7,t),this.leftStickAxisX=this.processAxis(0,t,!1),this.leftStickAxisY=this.processAxis(1,t,!0),this.rightStickAxisX=this.processAxis(2,t,!1),this.rightStickAxisY=this.processAxis(3,t,!0)}processButton(t,s,e){if(t>=s.buttons.length)return i.Inactive;if(void 0===this.buttonTick[t])s.buttons[t].pressed&&(this.buttonTick[t]=e);else if(s.buttons[t].pressed){if(e-this.buttonTick[t]>15)return this.userInput=!0,i.Hold}else{if(e-this.buttonTick[t]<=15)return this.userInput=!0,this.buttonTick[t]=void 0,i.Click;this.buttonTick[t]=void 0}return i.Inactive}processButtonValue(t,s){return t>=s.buttons.length?0:s.buttons[t].value>.1?(this.userInput=!0,s.buttons[t].value):0}processAxis(t,s,e){return t>=s.axes.length?0:Math.abs(s.axes[t])>.1?(this.userInput=!0,e?-s.axes[t]:s.axes[t]):0}}},vHk7:function(t,s,e){"use strict";e.d(s,"a",function(){return c});var i=e("lJxs"),o=e("ZmmG"),n=e("HP1K"),r=e("fXoL"),a=e("tk/3");let c=(()=>{class t{constructor(t){this.httpClient=t}getStarSector(t){return this.httpClient.get("assets/data/edsm/"+t+".json").pipe(Object(i.a)(t=>{const s=new n.a;return s.load(t),s}))}getStarSystem(t){return this.httpClient.get("assets/data/systems/"+t+".json").pipe(Object(i.a)(t=>{const s=new o.a;return s.load(t),s}))}}return t.\u0275fac=function(s){return new(s||t)(r.Vb(a.b))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ys0j:function(t,s,e){"use strict";e.d(s,"b",function(){return i}),e.d(s,"a",function(){return o});var i=function(t){return t[t.Inactive=0]="Inactive",t[t.Hold=1]="Hold",t[t.Click=2]="Click",t}({});class o{constructor(){this.leftMouse=i.Inactive,this.middleMouse=i.Inactive,this.rightMouse=i.Inactive}applyMouse(t,s,e){switch(this.deltaX=t.clientX-this.x,this.deltaY=t.clientY-this.y,this.x=t.clientX,this.y=t.clientY,s){case"down":0===t.button&&this.leftMouse===i.Inactive&&(this.leftMouse=i.Hold,this.userInput=!0),1===t.button&&this.middleMouse===i.Inactive&&(this.middleMouse=i.Hold,this.userInput=!0),2===t.button&&this.rightMouse===i.Inactive&&(this.rightMouse=i.Hold,this.userInput=!0);break;case"up":0===t.button&&this.leftMouse===i.Hold&&(this.leftMouse=i.Click,this.userInput=!0),1===t.button&&this.middleMouse===i.Hold&&(this.middleMouse=i.Click,this.userInput=!0),2===t.button&&this.rightMouse===i.Hold&&(this.rightMouse=i.Click,this.userInput=!0)}(this.deltaX||this.deltaY)&&(this.userInput=!0)}applyTick(){this.deltaZ=0,this.leftMouse===i.Click&&(this.leftMouse=i.Inactive,this.userInput=!0),this.rightMouse===i.Click&&(this.rightMouse=i.Inactive,this.userInput=!0),this.middleMouse===i.Click&&(this.middleMouse=i.Inactive,this.userInput=!0)}applyWheel(t,s){this.deltaZ=t.deltaY,this.deltaZ&&(this.userInput=!0)}}}}]);