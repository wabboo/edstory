(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{"66Z7":function(e,a,t){"use strict";t.r(a),t.d(a,"SystemMapModule",function(){return X});var s=t("ofXK"),c=t("t0Ln"),n=t("tyNb"),i=t("N5T1"),o=t("UR3C"),r=t("quSY"),b=t("NdHK"),p=t("fXoL"),l=t("hn8X"),m=t("cI3Y"),g=t("Womt"),u=t("HpzX"),h=t("4GCU"),f=t("3Y7Z");let d=(()=>{class e extends f.a{constructor(e,a,t){super(e),this.gamepadService=a,this.keyMouseService=t,this.keyMouseService.attach(e.nativeElement),this.keyMouseService.state.subscribe(e=>{this.applyMouseStateToMapCamera(e)}),this.gamepadService.controller1.subscribe(e=>{})}get starSystem(){return this.$starSystem}set starSystem(e){this.$starSystem=e}getViewport(e,a){return this.viewport&&this.viewport.camera===e&&this.viewport.screen===a||(this.viewport=new h.c(e,a)),this.viewport.starSystem=this.starSystem,this.viewport}applyMouseStateToMapCamera(e){const a=new g.y;this.viewport.camera.getWorldDirection(a),a.z=0;const t=a.clone().applyAxisAngle(new g.y(0,0,1),.5*Math.PI);if(e.leftMouse===u.b.Hold&&e.rightMouse===u.b.Hold)return this.viewport.cursor.cursorPosition.addScaledVector(a,.25*e.deltaY),this.viewport.cursor.cursorPosition.addScaledVector(t,.25*e.deltaX),!0;if(e.leftMouse===u.b.Hold)this.viewport.cursor.cameraRotation+=e.deltaX/100,this.viewport.cursor.cameraAngle+=e.deltaY/100,this.viewport.cursor.cameraAngle>Math.PI&&(this.viewport.cursor.cameraAngle=Math.PI),this.viewport.cursor.cameraAngle<-Math.PI&&(this.viewport.cursor.cameraAngle=-Math.PI);else if(e.rightMouse===u.b.Hold)return this.viewport.cursor.cursorPosition.z+=.25*e.deltaY,!0;e.deltaZ<0?(this.viewport.cursor.cameraZoom-=10,this.viewport.cursor.cameraZoom<5&&(this.viewport.cursor.cameraZoom=5)):e.deltaZ>0&&(this.viewport.cursor.cameraZoom+=10)}}return e.\u0275fac=function(a){return new(a||e)(p.Lb(p.l),p.Lb(b.b),p.Lb(u.a))},e.\u0275cmp=p.Fb({type:e,selectors:[["space-viewport-system"]],inputs:{starSystem:"starSystem"},features:[p.xb],decls:0,vars:0,template:function(e,a){},styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}"]}),e})();var v=t("iBBg"),S=t("qAme"),M=t("HZIp"),w=t("ZfcE"),y=t("e6+D"),P=t("rVAJ"),C=t("Lh2f");function A(e,a){1&e&&(p.Rb(0,"span"),p.sc(1,"Navigate"),p.Qb())}function x(e,a){1&e&&(p.Rb(0,"span"),p.sc(1,"Flightplan"),p.Qb())}function k(e,a){1&e&&(p.Rb(0,"span"),p.sc(1,"Inter astra"),p.Qb())}function R(e,a){1&e&&(p.Rb(0,"span"),p.sc(1,"Explore"),p.Qb())}function Q(e,a){1&e&&(p.Rb(0,"span"),p.sc(1,"Trade"),p.Qb())}function I(e,a){1&e&&(p.Rb(0,"span"),p.sc(1,"Powerplay"),p.Qb())}function z(e,a){if(1&e){const e=p.Sb();p.Rb(0,"asc-frame-menu",15),p.Yb("activePageChange",function(a){return p.mc(e),p.bc().tab=a})("activePageChange",function(a){return p.mc(e),p.bc().onTabChange(a)}),p.Mb(1,"asc-frame-page",16),p.Mb(2,"asc-frame-page",17),p.Mb(3,"asc-frame-page",18),p.Mb(4,"asc-frame-page",19),p.Mb(5,"asc-frame-page",20),p.Qb()}if(2&e){const e=p.bc();p.ec("activePage",e.tab),p.Ab(2),p.ec("seperator",!0),p.Ab(1),p.ec("seperator",!0)}}function Y(e,a){if(1&e){const e=p.Sb();p.Rb(0,"asc-frame-menu",21),p.Yb("activePageChange",function(a){return p.mc(e),p.bc().tab=a})("activePageChange",function(a){return p.mc(e),p.bc().onTabChange(a)}),p.Mb(1,"asc-frame-page",16),p.Mb(2,"asc-frame-page",17),p.Mb(3,"asc-frame-page",22),p.Mb(4,"asc-frame-page",23),p.Qb()}if(2&e){const e=p.bc();p.ec("activePage",e.tab),p.Ab(2),p.ec("seperator",!0),p.Ab(1),p.ec("seperator",!0)}}function q(e,a){if(1&e){const e=p.Sb();p.Rb(0,"asc-frame-menu",21),p.Yb("activePageChange",function(a){return p.mc(e),p.bc().tab=a})("activePageChange",function(a){return p.mc(e),p.bc().onTabChange(a)}),p.Mb(1,"asc-frame-page",16),p.Mb(2,"asc-frame-page",17),p.Mb(3,"asc-frame-page",24),p.Mb(4,"asc-frame-page",25),p.Mb(5,"asc-frame-page",26),p.Qb()}if(2&e){const e=p.bc();p.ec("activePage",e.tab),p.Ab(2),p.ec("seperator",!0)}}function T(e,a){if(1&e){const e=p.Sb();p.Rb(0,"asc-frame-menu",21),p.Yb("activePageChange",function(a){return p.mc(e),p.bc().tab=a})("activePageChange",function(a){return p.mc(e),p.bc().onTabChange(a)}),p.Mb(1,"asc-frame-page",16),p.Mb(2,"asc-frame-page",17),p.Mb(3,"asc-frame-page",27),p.Rb(4,"asc-frame-page",28),p.Rb(5,"asc-frame-column"),p.sc(6," Show market comparison information. "),p.Qb(),p.Qb(),p.Qb()}if(2&e){const e=p.bc();p.ec("activePage",e.tab),p.Ab(2),p.ec("seperator",!0)}}function O(e,a){if(1&e){const e=p.Sb();p.Rb(0,"asc-frame-menu",21),p.Yb("activePageChange",function(a){return p.mc(e),p.bc().tab=a})("activePageChange",function(a){return p.mc(e),p.bc().onTabChange(a)}),p.Mb(1,"asc-frame-page",16),p.Mb(2,"asc-frame-page",17),p.Qb()}if(2&e){const e=p.bc();p.ec("activePage",e.tab),p.Ab(2),p.ec("seperator",!0)}}const Z=function(){return[2,2,90,2]},L=[{path:"",component:(()=>{class e{constructor(e,a,t){this.spaceService=e,this.locationService=a,this.gamepadService=t,this.subscription=new r.a,this.mode="navigate",this.tab="current",this.starSystem=new i.a,this.starMode=o.b,this.settings=o.a,this.subscription.add(this.spaceService.getStarSystem("okinura").subscribe(e=>{this.starSystem=e})),this.subscription.add(this.gamepadService.controller1.subscribe(e=>{e.leftBumper===b.a.Click&&this.previousPage(),e.rightBumper===b.a.Click&&this.nextPage()}))}ngOnInit(){}ngOnDestroy(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}onModeSelect(e){switch(this.mode=e,this.mode){case"navigate":this.settings.starMode=o.b.Security;break;case"flightplan":this.settings.starMode=o.b.StarClass;break;case"explore":this.settings.starMode=o.b.VisitedStars;break;case"trade":this.settings.starMode=o.b.Economy;break;case"powerplay":this.settings.starMode=o.b.Allegiance}}onTabChange(e){"current"===e&&(o.a.focusSystem=o.a.currentSystem),"selected"===e&&(o.a.focusSystem=o.a.selectedSystem)}onBack(){history.back()}onExit(){history.back()}previousPage(){switch(this.mode){case"powerplay":this.onModeSelect("trade");break;case"trade":this.onModeSelect("explore");break;case"explore":this.onModeSelect("flightplan");break;case"flightplan":this.onModeSelect("navigate")}}nextPage(){switch(this.mode){case"navigate":this.onModeSelect("flightplan");break;case"flightplan":this.onModeSelect("explore");break;case"explore":this.onModeSelect("trade");break;case"trade":this.onModeSelect("powerplay")}}}return e.\u0275fac=function(a){return new(a||e)(p.Lb(l.a),p.Lb(m.a),p.Lb(b.b))},e.\u0275cmp=p.Fb({type:e,selectors:[["ng-component"]],decls:35,vars:24,consts:[[3,"starSystem"],[3,"rect"],[3,"open"],[1,"mode",3,"ngSwitch"],[4,"ngSwitchCase"],[3,"choice"],[3,"selected","press"],["icon","/assets/icons/location"],["icon","/assets/icons/route"],[1,"spacer"],["icon","/assets/icons/codex"],["icon","/assets/icons/commodity"],["icon","/assets/icons/gal-power"],["margin","1","position","10","menuSize","3","pageSize","25",3,"activePage","activePageChange",4,"ngIf"],["margin","1","position","10","menuSize","4","pageSize","25",3,"activePage","activePageChange",4,"ngIf"],["margin","1","position","10","menuSize","3","pageSize","25",3,"activePage","activePageChange"],["id","selected","icon","/assets/icons/location-select"],["id","legend","icon","/assets/icons/galaxy-map/options",3,"seperator"],["id","search","icon","/assets/icons/search",3,"seperator"],["id","your-missions","icon","/assets/icons/mission"],["icon","/assets/icons/bookmark"],["margin","1","position","10","menuSize","4","pageSize","25",3,"activePage","activePageChange"],["id","management","icon","/assets/icons/galaxy-map/flightplan",3,"seperator"],["id","add","icon","/assets/icons/add"],["id","triangulate","icon","/assets/icons/triangulate"],["id","rangefinder","icon","/assets/icons/rangefinder"],["id","ruler","icon","/assets/icons/ruler"],["id","routes","icon","/assets/icons/compare"],["id","extraction","icon","/assets/icons/compare"]],template:function(e,a){1&e&&(p.Mb(0,"space-viewport-system",0),p.Rb(1,"asc-frame",1),p.Rb(2,"asc-frame-column",2),p.Rb(3,"div",3),p.sc(4," Stellar atlas | system map "),p.qc(5,A,2,0,"span",4),p.qc(6,x,2,0,"span",4),p.qc(7,k,2,0,"span",4),p.qc(8,R,2,0,"span",4),p.qc(9,Q,2,0,"span",4),p.qc(10,I,2,0,"span",4),p.Qb(),p.Qb(),p.Rb(11,"asc-frame-column",2),p.Rb(12,"asc-tile-row",5),p.Rb(13,"asc-tile",6),p.Yb("press",function(){return a.onModeSelect("navigate")}),p.Mb(14,"asc-icon",7),p.sc(15,"Navigate"),p.Qb(),p.Rb(16,"asc-tile",6),p.Yb("press",function(){return a.onModeSelect("flightplan")}),p.Mb(17,"asc-icon",8),p.sc(18,"Flightplan"),p.Qb(),p.Mb(19,"div",9),p.Rb(20,"asc-tile",6),p.Yb("press",function(){return a.onModeSelect("explore")}),p.Mb(21,"asc-icon",10),p.sc(22,"Explore"),p.Qb(),p.Rb(23,"asc-tile",6),p.Yb("press",function(){return a.onModeSelect("trade")}),p.Mb(24,"asc-icon",11),p.sc(25,"Trade"),p.Qb(),p.Rb(26,"asc-tile",6),p.Yb("press",function(){return a.onModeSelect("powerplay")}),p.Mb(27,"asc-icon",12),p.sc(28,"Powerplay"),p.Qb(),p.Qb(),p.Qb(),p.Mb(29,"asc-frame-column",2),p.Qb(),p.qc(30,z,6,3,"asc-frame-menu",13),p.qc(31,Y,5,3,"asc-frame-menu",14),p.qc(32,q,6,2,"asc-frame-menu",14),p.qc(33,T,7,2,"asc-frame-menu",14),p.qc(34,O,3,2,"asc-frame-menu",14)),2&e&&(p.ec("starSystem",a.starSystem),p.Ab(1),p.ec("rect",p.fc(23,Z)),p.Ab(1),p.ec("open",!0),p.Ab(1),p.ec("ngSwitch",a.mode),p.Ab(2),p.ec("ngSwitchCase","navigate"),p.Ab(1),p.ec("ngSwitchCase","flightplan"),p.Ab(1),p.ec("ngSwitchCase","interastra"),p.Ab(1),p.ec("ngSwitchCase","explore"),p.Ab(1),p.ec("ngSwitchCase","trade"),p.Ab(1),p.ec("ngSwitchCase","powerplay"),p.Ab(1),p.ec("open",!0),p.Ab(1),p.ec("choice",!0),p.Ab(1),p.ec("selected","navigate"===a.mode),p.Ab(3),p.ec("selected","flightplan"===a.mode),p.Ab(4),p.ec("selected","explore"===a.mode),p.Ab(3),p.ec("selected","trade"===a.mode),p.Ab(3),p.ec("selected","powerplay"===a.mode),p.Ab(3),p.ec("open",!0),p.Ab(1),p.ec("ngIf","navigate"===a.mode),p.Ab(1),p.ec("ngIf","flightplan"===a.mode),p.Ab(1),p.ec("ngIf","explore"===a.mode),p.Ab(1),p.ec("ngIf","trade"===a.mode),p.Ab(1),p.ec("ngIf","powerplay"===a.mode))},directives:[d,v.a,S.a,s.k,s.l,M.a,w.a,y.a,s.j,P.a,C.a],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;background:#000;z-index:1000}asc-frame-page[_ngcontent-%COMP%]{--asc-item-square:4vh}asc-tile-row[_ngcontent-%COMP%]{--asc-font-size:1.2vh}.mode[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;align-items:flex-start;justify-content:center;text-shadow:2px 2px rgba(0,0,0,.8);font-size:1.6vh;color:var(--asc-primary-color)}.mode[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3.5vh;line-height:3vh;color:#fff}"]}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=p.Jb({type:e}),e.\u0275inj=p.Ib({imports:[[n.d.forChild(L)],n.d]}),e})();var _=t("OF9g"),E=t("cI8z");let X=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=p.Jb({type:e}),e.\u0275inj=p.Ib({imports:[[s.b,c.a,E.a,_.a,H]]}),e})()}}]);