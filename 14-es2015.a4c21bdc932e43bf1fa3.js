(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{lmR2:function(e,t,s){"use strict";s.r(t),s.d(t,"MenuModule",(function(){return E}));var n=s("ofXK"),i=s("IVc4"),c=s("fXoL");let r=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[n.b,i.a]]}),e})();var o=s("tyNb");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["app-menu"]],decls:1,vars:0,template:function(e,t){1&e&&c.Nb(0,"router-outlet")},directives:[o.e],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:row;justify-content:center;align-items:center;background:url(/edstory/assets/backgrounds/main2.jpg);background-size:cover}"]}),e})(),h=(()=>{class e{constructor(e,t){this.router=e,this.route=t}ngOnInit(){}onClick(e){this.router.navigate([e],{relativeTo:this.route})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(o.b),c.Mb(o.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["ng-component"]],decls:21,vars:0,consts:[[1,"destination",3,"click"],[1,"image","ship"],[1,"textbox"],[1,"title"],[1,"description"],[1,"image","settings"],[1,"image","playground"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Zb("click",(function(){return t.onClick("/ship/center")})),c.Nb(1,"div",1),c.Sb(2,"div",2),c.Sb(3,"div",3),c.vc(4,"Ship"),c.Rb(),c.Sb(5,"div",4),c.vc(6," Enter a simulated ship of Elite: Dangerous. "),c.Rb(),c.Rb(),c.Rb(),c.Sb(7,"div",0),c.Zb("click",(function(){return t.onClick("/tinkering")})),c.Nb(8,"div",5),c.Sb(9,"div",2),c.Sb(10,"div",3),c.vc(11,"Settings"),c.Rb(),c.Sb(12,"div",4),c.vc(13," Turn on/off various alterations to the ship interface. "),c.Rb(),c.Rb(),c.Rb(),c.Sb(14,"div",0),c.Zb("click",(function(){return t.onClick("/playground")})),c.Nb(15,"div",6),c.Sb(16,"div",2),c.Sb(17,"div",3),c.vc(18,"Playground"),c.Rb(),c.Sb(19,"div",4),c.vc(20," Testing of experimental features. "),c.Rb(),c.Rb(),c.Rb())},styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:row;justify-content:center;align-items:center}.destination[_ngcontent-%COMP%]{width:300px;height:400px;margin:8px;background:rgba(64,8,0,.55);box-shadow:0 16px 16px 4px #000}.destination[_ngcontent-%COMP%]:hover{background:rgba(175,16,0,.5);cursor:url(/edstory/assets/support/cursor_glow.png) 6 1,pointer}.disabled[_ngcontent-%COMP%]{cursor:default;opacity:.4}.image[_ngcontent-%COMP%]{width:100%;height:250px;margin-bottom:8px}.ship[_ngcontent-%COMP%]{background:url(/edstory/assets/ship/krait-mk-ii/center.png),url(/edstory/assets/location/station/hangar/center.png);background-size:cover;background-position:-64px;opacity:.7}.settings[_ngcontent-%COMP%]{background:url(/edstory/assets/backgrounds/cogs.jpg);background-size:cover;background-position:-32px;opacity:.7}.playground[_ngcontent-%COMP%]{background:url(/edstory/assets/backgrounds/experimental.jpg);background-size:cover;background-position:-32px;opacity:.7}.textbox[_ngcontent-%COMP%]{margin:16px}.title[_ngcontent-%COMP%]{margin-bottom:8px;color:#ff6105}.description[_ngcontent-%COMP%]{font-size:small;color:#fff;text-transform:none}"]}),e})();var d=s("4A+J"),u=s("OcQ2"),l=s("OEjf"),p=s("EY6u"),g=s("eihG");function b(e,t){1&e&&c.Nb(0,"ed-icon",3)}function m(e,t){1&e&&c.Nb(0,"ed-icon",4)}const f=["*"];let k=(()=>{class e{constructor(){this.state="active",this.checkedChange=new c.n}get checked(){return this.checkedValue}set checked(e){this.checkedValue=e,this.checkedChange.emit(e)}ngOnInit(){}getCssClass(){let e=" checked";switch(this.checkedValue||(e=" unchecked"),this.state){case"active":return"container active"+e;case"selected":return"container selected"+e;case"disabled":return"container disabled"+e;case"blocked":return"container blocked"+e}}onClick(){"active"===this.state&&(this.checked=!this.checked)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["ed-check"]],inputs:{state:"state",checked:"checked"},outputs:{checkedChange:"checkedChange"},ngContentSelectors:f,decls:4,vars:3,consts:[[3,"ngClass","click"],["icon","checked","size","3",4,"ngIf"],["icon","unchecked","size","3",4,"ngIf"],["icon","checked","size","3"],["icon","unchecked","size","3"]],template:function(e,t){1&e&&(c.gc(),c.Sb(0,"div",0),c.Zb("click",(function(){return t.onClick()})),c.tc(1,b,1,0,"ed-icon",1),c.tc(2,m,1,0,"ed-icon",2),c.fc(3),c.Rb()),2&e&&(c.hc("ngClass",t.getCssClass()),c.Bb(1),c.hc("ngIf",t.checked),c.Bb(1),c.hc("ngIf",!t.checked))},directives:[n.h,n.j,g.a],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin-bottom:4px}.container[_ngcontent-%COMP%]{box-sizing:border-box;height:4vh;display:flex;flex-direction:row;align-items:center;padding-left:.5vw;font-size:1.7vh}ed-icon[_ngcontent-%COMP%]{margin-right:8px}.checked[_ngcontent-%COMP%]{color:#ff6105;stroke:#ff6105}.unchecked[_ngcontent-%COMP%]{color:rgba(187,44,0,.7);stroke:rgba(187,44,0,.7)}.active[_ngcontent-%COMP%]{background:rgba(64,8,0,.55)}.container.active[_ngcontent-%COMP%]:hover{background:#f07b05;color:#000}.selected[_ngcontent-%COMP%]{background:rgba(175,16,0,.5);color:#ff6105;border-right:8px solid #ff6105}.container.selected[_ngcontent-%COMP%]:hover{background:#f07b05;color:#000}.disabled[_ngcontent-%COMP%]{background:rgba(48,48,48,.69);color:#fff;stroke:#fff;fill:#fff}.blocked[_ngcontent-%COMP%]{background:rgba(56,0,0,.38);color:#ac0000;stroke:#ac0000;fill:#ac0000}.container.blocked[_ngcontent-%COMP%]:hover{background:#ac0000;color:#000;stroke:#000;fill:#000}"]}),e})(),v=(()=>{class e{constructor(e){this.commanderService=e,this.commanderService.features.subscribe(e=>{this.features=e})}ngOnInit(){}updateFeatures(){this.commanderService.features.next(this.features)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(d.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["ng-component"]],decls:20,vars:6,consts:[[1,"columns"],["name","Alternatives","description","Suggested improvements for game"],["state","active",3,"checked","checkedChange"],[3,"checked","checkedChange"],["state","blocked",3,"checked","checkedChange"],["name","Game features","description","Update based additions"]],template:function(e,t){1&e&&(c.Sb(0,"ed-window"),c.Sb(1,"div",0),c.Sb(2,"ed-column"),c.Nb(3,"ed-title",1),c.Sb(4,"ed-check",2),c.Zb("checkedChange",(function(e){return t.features.updatedShipPanels=e}))("checkedChange",(function(){return t.updateFeatures()})),c.vc(5,"Alternate internal/external panels"),c.Rb(),c.Sb(6,"ed-check",3),c.Zb("checkedChange",(function(e){return t.features.corporations=e}))("checkedChange",(function(){return t.updateFeatures()})),c.vc(7,"Corporations"),c.Rb(),c.Sb(8,"ed-check",4),c.Zb("checkedChange",(function(e){return t.features.advisors=e}))("checkedChange",(function(){return t.updateFeatures()})),c.vc(9,"Advisors"),c.Rb(),c.Sb(10,"ed-check",4),c.Zb("checkedChange",(function(e){return t.features.passengerLines=e}))("checkedChange",(function(){return t.updateFeatures()})),c.vc(11,"Passenger lines"),c.Rb(),c.Sb(12,"ed-check",4),c.Zb("checkedChange",(function(e){return t.features.mechanic=e}))("checkedChange",(function(){return t.updateFeatures()})),c.vc(13,"Mechanic"),c.Rb(),c.Rb(),c.Sb(14,"ed-column"),c.Nb(15,"ed-title",5),c.Sb(16,"h4"),c.vc(17,"June 2020"),c.Rb(),c.Sb(18,"ed-check",3),c.Zb("checkedChange",(function(e){return t.features.fleetCarriers=e}))("checkedChange",(function(){return t.updateFeatures()})),c.vc(19,"Fleet carriers"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.Bb(4),c.hc("checked",t.features.updatedShipPanels),c.Bb(2),c.hc("checked",t.features.corporations),c.Bb(2),c.hc("checked",t.features.advisors),c.Bb(2),c.hc("checked",t.features.passengerLines),c.Bb(2),c.hc("checked",t.features.mechanic),c.Bb(6),c.hc("checked",t.features.fleetCarriers))},directives:[u.a,l.a,p.a,k],styles:["[_nghost-%COMP%]{height:100%}.columns[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:row}ed-column[_ngcontent-%COMP%]{width:50%;margin:1vw;padding:1vw}"]}),e})();var S=s("vHk7"),w=s("Womt");let y=(()=>{class e{constructor(e){this.element=e,this.loader=new w.b,this.renderer=new w.l,this.scene=new w.i,this.camera=new w.g(60,window.innerWidth/window.innerHeight,1e-4,1e6),this.hud=new w.f}ngOnInit(){this.element.nativeElement.appendChild(this.renderer.domElement),this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setAnimationLoop(()=>{this.renderFrame()}),this.camera.position.z=100,this.camera.position.y=-150,this.camera.rotation.x=1,this.scene.background=this.loader.load(["assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg","assets/backgrounds/space.jpg"])}ngOnDestroy(){this.scene.dispose(),this.renderer.dispose()}onResize(e){this.renderer.setSize(window.innerWidth,window.innerHeight),this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix()}resetViewport(e){this.scene.children=[],e.linkToScene(this.scene)}applyGamepadStateToMapCamera(e){const t=new w.k;this.camera.getWorldDirection(t),t.z=0,this.camera.position.addScaledVector(t,e.leftStickAxisY*(5/this.camera.zoom)),t.applyAxisAngle(new w.k(0,0,1),.5*Math.PI),this.camera.position.addScaledVector(t,5/this.camera.zoom*-e.leftStickAxisX),this.camera.rotateOnWorldAxis(new w.k(0,0,1),-e.rightStickAxisX/(50*this.camera.zoom)),this.camera.rotateOnWorldAxis(t,-e.rightStickAxisY/(50*this.camera.zoom)),e.leftTrigger&&(this.camera.zoom=1,this.camera.updateProjectionMatrix()),e.rightTrigger&&(this.camera.zoom+=this.camera.zoom/50,this.camera.updateProjectionMatrix())}renderFrame(){this.tick=Date.now(),this.run(this.tick),this.renderer.render(this.scene,this.camera)}updateHud(){this.hud.children=[];const e=new w.h(5,5,1,1),t=new w.e({color:"blue",opacity:.5,transparent:!0,side:w.c}),s=new w.d(e,t);this.hud.add(s);const n=new w.k,i=new w.k;this.camera.getWorldDirection(n),this.camera.getWorldPosition(i),this.hud.position.copy(this.camera.position),this.hud.position.addScaledVector(n,5),this.hud.rotation.copy(this.camera.rotation)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(c.l))},e.\u0275dir=c.Hb({type:e,hostBindings:function(e,t){1&e&&c.Zb("resize",(function(e){return t.onResize(e)}),!1,c.nc)}}),e})();var x=s("PqYM"),C=function(e){return e[e.Inactive=0]="Inactive",e[e.Click=2]="Click",e[e.Hold=3]="Hold",e}({});class M{constructor(){this.buttonTick=[],this.buttonA=C.Inactive,this.buttonB=C.Inactive,this.buttonX=C.Inactive,this.buttonY=C.Inactive,this.leftBumper=C.Inactive,this.rightBumper=C.Inactive,this.leftStick=C.Inactive,this.rightStick=C.Inactive,this.dPadUp=C.Inactive,this.dPadRight=C.Inactive,this.dPadDown=C.Inactive,this.dPadLeft=C.Inactive}apply(e,t){if(this.userInput=!1,this.buttonTick.length!==e.buttons.length){this.buttonTick=[];for(const t of e.buttons)this.buttonTick.push(void 0)}this.buttonA=this.processButton(0,e,t),this.buttonB=this.processButton(1,e,t),this.buttonX=this.processButton(2,e,t),this.buttonY=this.processButton(3,e,t),this.leftBumper=this.processButton(4,e,t),this.rightBumper=this.processButton(5,e,t),this.leftStick=this.processButton(10,e,t),this.rightStick=this.processButton(11,e,t),this.dPadUp=this.processButton(12,e,t),this.dPadRight=this.processButton(13,e,t),this.dPadDown=this.processButton(14,e,t),this.dPadLeft=this.processButton(15,e,t),this.leftTrigger=this.processButtonValue(6,e),this.rightTrigger=this.processButtonValue(7,e),this.leftStickAxisX=this.processAxis(0,e,!1),this.leftStickAxisY=this.processAxis(1,e,!0),this.rightStickAxisX=this.processAxis(2,e,!1),this.rightStickAxisY=this.processAxis(3,e,!0)}processButton(e,t,s){if(e>=t.buttons.length)return C.Inactive;if(void 0===this.buttonTick[e])t.buttons[e].pressed&&(this.buttonTick[e]=s);else if(t.buttons[e].pressed){if(s-this.buttonTick[e]>30)return this.userInput=!0,C.Hold}else{if(s-this.buttonTick[e]<=30)return this.userInput=!0,this.buttonTick[e]=void 0,C.Click;this.buttonTick[e]=void 0}return C.Inactive}processButtonValue(e,t){return e>=t.buttons.length?0:t.buttons[e].value>.1?(this.userInput=!0,t.buttons[e].value):0}processAxis(e,t,s){return e>=t.axes.length?0:Math.abs(t.axes[e])>.1?(this.userInput=!0,s?-t.axes[e]:t.axes[e]):0}}let P=(()=>{class e{constructor(){this.controller1=new c.n,this.gamepadState=new M,this.tick=0,window.addEventListener("gamepadconnected",e=>{this.gamepad=e.gamepad,this.processState()}),window.addEventListener("gamepaddisconnected",e=>{this.gamepad=void 0})}processState(){this.gamepad&&(this.gamepad=navigator.getGamepads()[this.gamepad.index],this.tick+=1,this.gamepadState.apply(this.gamepad,this.tick),this.gamepadState.userInput&&this.controller1.next(this.gamepadState),Object(x.a)(16.67).subscribe(()=>this.processState()))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class O{applyMouse(e,t){this.deltaX=e.clientX-this.x,this.deltaY=e.clientY-this.y,this.x=e.clientX,this.y=e.clientY,(this.deltaX||this.deltaY)&&(this.userInput=!0)}applyWheel(e,t){this.deltaZ=e.deltaY,this.deltaZ&&(this.userInput=!0)}}let I=(()=>{class e{constructor(){this.state=new c.n,this.keyMouseState=new O,this.tick=0}attach(e){this.domElement&&(this.domElement.removeEventListener("mousemove",e=>{this.mouseHandler(e)}),this.domElement.removeEventListener("mousedown",e=>{this.mouseHandler(e)}),this.domElement.removeEventListener("mouseup",e=>{this.mouseHandler(e)}),this.domElement.removeEventListener("wheel",e=>{this.wheelHandler(e)})),this.domElement=e,this.domElement.addEventListener("mousemove",e=>{this.mouseHandler(e)}),this.domElement.addEventListener("mousedown",e=>{this.mouseHandler(e)}),this.domElement.addEventListener("mouseup",e=>{this.mouseHandler(e)}),this.domElement.addEventListener("wheel",e=>{this.wheelHandler(e)}),this.processState()}mouseHandler(e){this.keyMouseState.applyMouse(e,this.tick)}wheelHandler(e){this.keyMouseState.applyWheel(e,this.tick)}processState(){this.tick+=1,this.keyMouseState.userInput&&(this.state.emit(this.keyMouseState),this.keyMouseState.userInput=!1),Object(x.a)(16.67).subscribe(()=>this.processState())}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),_=(()=>{class e extends y{constructor(e,t,s){super(e),this.gamepadService=t,this.keyMouseService=s,this.mode="map",this.keyMouseService.attach(e.nativeElement),this.keyMouseService.state.subscribe(e=>{}),this.gamepadService.controller1.subscribe(e=>{switch(this.mode){case"map":this.applyGamepadStateToMapCamera(e)}})}get starSystem(){return this.$starSystem}set starSystem(e){this.$starSystem=e,this.$starSystem&&this.resetViewport(this.$starSystem)}run(e){this.starSystem&&this.starSystem.run(e)}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(c.l),c.Mb(P),c.Mb(I))},e.\u0275cmp=c.Gb({type:e,selectors:[["space-viewport-system"]],inputs:{mode:"mode",starSystem:"starSystem"},features:[c.yb],decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}"]}),e})();const B=[{path:"",component:a,children:[{path:"",component:h},{path:"tinkering",component:v},{path:"playground",component:(()=>{class e{constructor(e){this.spaceService=e,this.spaceService.getStarSystem("okinura").subscribe(e=>{this.starSystem=e})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(S.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"starSystem"]],template:function(e,t){1&e&&c.Nb(0,"space-viewport-system",0),2&e&&c.hc("starSystem",t.starSystem)},directives:[_],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column;margin:64px}.instruction[_ngcontent-%COMP%]{position:absolute;left:16px;top:16px;border:2px solid rgba(187,44,0,.5);background:repeating-linear-gradient(0deg,rgba(0,0,0,.55),rgba(0,0,0,.55) 4px,rgba(64,4,0,.25) 0,rgba(0,0,0,.55) 6px),rgba(0,0,0,.35);padding:8px;z-index:10}"]}),e})()}]}];let R=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[o.d.forChild(B)],o.d]}),e})(),E=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[n.b,r,i.a,R]]}),e})()}}]);